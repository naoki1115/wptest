"use strict";

var $ = jQuery.noConflict();
$(function () {
  // global
  var PC = 1040;
  var BP = 768;
  var $window = $(window);
  var $header = $('#siteHeader');
  var openCls = 'open',
      showCls = 'show',
      nvaOpenCls = 'nav-open',
      modalCls = 'modal-open'; // common

  $('#spNavTrigger').on('click', spNavToggle);
  $window.on('load resize', getHeaderHeight);
  $('a[href^="#"]').on('click', smoothScroll);
  $window.on('scroll resize', function () {
    goTopFixedSide();
    goTopFixedLength();
  });
  $window.on('load resize', homeMvHeightFit);
  $window.on('load resize', pageLinkAnchorPos);
  $window.on('resize', navReset);
  $('#spNavToggle').on('click', spNavToggle);
  /**
   * common
   * get header height
   *
   * @return {number}
   */

  function getHeaderHeight() {
    return $('#siteHeader').height();
  }
  /**
   * common
   * smoothscroll
   */


  function smoothScroll() {
    var height = getHeaderHeight();
    var speed = 800,
        href = $(this).attr('href'),
        target = $(href === '#' || href === '' ? 'html' : href),
        position = target.offset().top - height + 20;
    $('html, body').animate({
      scrollTop: position
    }, speed, 'swing');
    console.log(height);
    return false;
  }
  /**
   * common
   * page - ancholink
   */


  function pageLinkAnchorPos() {
    if (location.hash !== '') {
      var targetOffset = $(location.hash).offset().top;
      $window.scrollTop(targetOffset - getHeaderHeight());
    }
  }
  /**
   * common
   * sp nav - toggle
   */


  var pos = 0;
  var spNavOpen = false;

  function spNavToggle() {
    if (spNavOpen) {
      $('body').removeClass(openCls);
      $('html').removeAttr('style').removeClass(nvaOpenCls);
      $('html, body').scrollTop(pos);
      spNavOpen = false;
    } else {
      pos = $window.scrollTop();
      $('html').css({
        position: 'fixed',
        top: -pos
      });
      $('body').addClass(openCls);
      $('html').addClass(nvaOpenCls);
      spNavOpen = true;
    }
  }
  /**
   * common
   * sp nav - click and close
   */


  function navClickClose() {
    if ($('html').hasClass(nvaOpenCls)) {
      $('html').removeClass(nvaOpenCls).removeAttr('style');
      $('body').removeClass(openCls);
      $('html, body').scrollTop(scroll);
    }
  }
  /**
   * common
   * sp nav - reset in pc size
   */


  function navReset() {
    var w = $window.width();

    if (w >= PC && $('html').hasClass(nvaOpenCls)) {
      $('html').removeAttr('style');
      $('html, body').scrollTop(pos);
      $('html').removeClass(nvaOpenCls);
      $('body').removeClass(openCls);
    }
  }
  /**
   * common
   * go top - side fix
   */


  function goTopFixedSide() {
    var maxWidth = 1600;
    var windowWidth = $window.width();

    if (windowWidth >= maxWidth) {
      var contentWidth = windowWidth - maxWidth;
      var btnPositionSide = contentWidth / 2;
      $topBtn.css({
        right: "".concat(btnPositionSide, "px")
      });
    } else {
      $topBtn.css({
        right: 15
      });
    }
  }
  /**
   * common
   * go top - fix length
   */


  function goTopFixedLength() {
    var windowWidth = $window.width();
    var scrollY = $(document).height();
    var scrollP = $window.height() + $(window).scrollTop();
    var footerH = $('.site-footer').innerHeight();

    if (scrollY - scrollP <= footerH) {
      if ($window.width() > BP) {
        $topBtn.css({
          position: 'absolute',
          bottom: footerH - 30
        });
      } else {
        $topBtn.css({
          position: 'absolute',
          bottom: footerH - 27
        });
      }
    } else if (scrollY - scrollP > footerH) {
      $topBtn.css({
        position: 'fixed',
        bottom: 15
      });
    }
  }
  /**
   * index
   * mv height 100% fit
   */


  function homeMvHeightFit() {
    var h = $window.height();
    var hh = $header.height();
    var mvH = h - hh;

    if ($('#mvSwiper').length) {
      $('#mvSwiper').css('height', mvH);
    }
  }
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuZXM2Il0sIm5hbWVzIjpbIiQiLCJqUXVlcnkiLCJub0NvbmZsaWN0IiwiUEMiLCJCUCIsIiR3aW5kb3ciLCJ3aW5kb3ciLCIkaGVhZGVyIiwib3BlbkNscyIsInNob3dDbHMiLCJudmFPcGVuQ2xzIiwibW9kYWxDbHMiLCJvbiIsInNwTmF2VG9nZ2xlIiwiZ2V0SGVhZGVySGVpZ2h0Iiwic21vb3RoU2Nyb2xsIiwiZ29Ub3BGaXhlZFNpZGUiLCJnb1RvcEZpeGVkTGVuZ3RoIiwiaG9tZU12SGVpZ2h0Rml0IiwicGFnZUxpbmtBbmNob3JQb3MiLCJuYXZSZXNldCIsImhlaWdodCIsInNwZWVkIiwiaHJlZiIsImF0dHIiLCJ0YXJnZXQiLCJwb3NpdGlvbiIsIm9mZnNldCIsInRvcCIsImFuaW1hdGUiLCJzY3JvbGxUb3AiLCJjb25zb2xlIiwibG9nIiwibG9jYXRpb24iLCJoYXNoIiwidGFyZ2V0T2Zmc2V0IiwicG9zIiwic3BOYXZPcGVuIiwicmVtb3ZlQ2xhc3MiLCJyZW1vdmVBdHRyIiwiY3NzIiwiYWRkQ2xhc3MiLCJuYXZDbGlja0Nsb3NlIiwiaGFzQ2xhc3MiLCJzY3JvbGwiLCJ3Iiwid2lkdGgiLCJtYXhXaWR0aCIsIndpbmRvd1dpZHRoIiwiY29udGVudFdpZHRoIiwiYnRuUG9zaXRpb25TaWRlIiwiJHRvcEJ0biIsInJpZ2h0Iiwic2Nyb2xsWSIsImRvY3VtZW50Iiwic2Nyb2xsUCIsImZvb3RlckgiLCJpbm5lckhlaWdodCIsImJvdHRvbSIsImgiLCJoaCIsIm12SCIsImxlbmd0aCJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFNQSxDQUFDLEdBQUdDLE1BQU0sQ0FBQ0MsVUFBUCxFQUFWO0FBRUFGLENBQUMsQ0FBQyxZQUFXO0FBQ1g7QUFDQSxNQUFNRyxFQUFFLEdBQUcsSUFBWDtBQUNBLE1BQU1DLEVBQUUsR0FBRyxHQUFYO0FBQ0EsTUFBTUMsT0FBTyxHQUFHTCxDQUFDLENBQUNNLE1BQUQsQ0FBakI7QUFDQSxNQUFNQyxPQUFP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QyxVQUFJbkQsT0FBTyxDQUFDeUMsS0FBUixLQUFrQjFDLEVBQXRCLEVBQTBCO0FBQ3hCK0MsUUFBQUEsT0FBTyxDQUFDWCxHQUFSLENBQVk7QUFDVmQsVUFBQUEsUUFBUSxFQUFFLFVBREE7QUFFVmdDLFVBQUFBLE1BQU0sRUFBRUYsT0FBTyxHQUFHO0FBRlIsU0FBWjtBQUlELE9BTEQsTUFLTztBQUNMTCxRQUFBQSxPQUFPLENBQUNYLEdBQVIsQ0FBWTtBQUNWZCxVQUFBQSxRQUFRLEVBQUUsVUFEQTtBQUVWZ0MsVUFBQUEsTUFBTSxFQUFFRixPQUFPLEdBQUc7QUFGUixTQUFaO0FBSUQ7QUFDRixLQVpELE1BWU8sSUFBSUgsT0FBTyxHQUFHRSxPQUFWLEdBQW9CQyxPQUF4QixFQUFpQztBQUN0Q0wsTUFBQUEsT0FBTyxDQUFDWCxHQUFSLENBQVk7QUFDVmQsUUFBQUEsUUFBUSxFQUFFLE9BREE7QUFFVmdDLFFBQUFBLE1BQU0sRUFBRTtBQUZFLE9BQVo7QUFJRDtBQUNGO0FBRUQ7Ozs7OztBQUlBLFdBQVN4QyxlQUFULEdBQTJCO0FBQ3pCLFFBQU15QyxDQUFDLEdBQUd0RCxPQUFPLENBQUNnQixNQUFSLEVBQVY7QUFDQSxRQUFNdUMsRUFBRSxHQUFHckQsT0FBTyxDQUFDYyxNQUFSLEVBQVg7QUFFQSxRQUFNd0MsR0FBRyxHQUFHRixDQUFDLEdBQUdDLEVBQWhCOztBQUVBLFFBQUk1RCxDQUFDLENBQUMsV0FBRCxDQUFELENBQWU4RCxNQUFuQixFQUEyQjtBQUN6QjlELE1BQUFBLENBQUMsQ0FBQyxXQUFELENBQUQsQ0FBZXdDLEdBQWYsQ0FBbUIsUUFBbkIsRUFBNkJxQixHQUE3QjtBQUNEO0FBQ0Y7QUFDRixDQXhNQSxDQUFEIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgJCA9IGpRdWVyeS5ub0NvbmZsaWN0KClcblxuJChmdW5jdGlvbigpIHtcbiAgLy8gZ2xvYmFsXG4gIGNvbnN0IFBDID0gMTA0MFxuICBjb25zdCBCUCA9IDc2OFxuICBjb25zdCAkd2luZG93ID0gJCh3aW5kb3cpXG4gIGNvbnN0ICRoZWFkZXIgPSAkKCcjc2l0ZUhlYWRlcicpXG5cbiAgY29uc3Qgb3BlbkNscyA9ICdvcGVuJyxcbiAgICBzaG93Q2xzID0gJ3Nob3cnLFxuICAgIG52YU9wZW5DbHMgPSAnbmF2LW9wZW4nLFxuICAgIG1vZGFsQ2xzID0gJ21vZGFsLW9wZW4nXG5cbiAgLy8gY29tbW9uXG4gICQoJyNzcE5hdlRyaWdnZXInKS5vbignY2xpY2snLCBzcE5hdlRvZ2dsZSlcblxuICAkd2luZG93Lm9uKCdsb2FkIHJlc2l6ZScsIGdldEhlYWRlckhlaWdodClcbiAgJCgnYVtocmVmXj1cIiNcIl0nKS5vbignY2xpY2snLCBzbW9vdGhTY3JvbGwpXG5cbiAgJHdpbmRvdy5vbignc2Nyb2xsIHJlc2l6ZScsIGZ1bmN0aW9uKCkge1xuICAgIGdvVG9wRml4ZWRTaWRlKClcbiAgICBnb1RvcEZpeGVkTGVuZ3RoKClcbiAgfSlcblxuICAkd2luZG93Lm9uKCdsb2FkIHJlc2l6ZScsIGhvbWVNdkhlaWdodEZpdClcbiAgJHdpbmRvdy5vbignbG9hZCByZXNpemUnLCBwYWdlTGlua0FuY2hvclBvcylcblxuICAkd2luZG93Lm9uKCdyZXNpemUnLCBuYXZSZXNldClcblxuICAkKCcjc3BOYXZUb2dnbGUnKS5vbignY2xpY2snLCBzcE5hdlRvZ2dsZSlcblxuICAvKipcbiAgICogY29tbW9uXG4gICAqIGdldCBoZWFkZXIgaGVpZ2h0XG4gICAqXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIGZ1bmN0aW9uIGdldEhlYWRlckhlaWdodCgpIHtcbiAgICByZXR1cm4gJCgnI3NpdGVIZWFkZXInKS5oZWlnaHQoKVxuICB9XG5cbiAgLyoqXG4gICAqIGNvbW1vblxuICAgKiBzbW9vdGhzY3JvbGxcbiAgICovXG4gIGZ1bmN0aW9uIHNtb290aFNjcm9sbCgpIHtcbiAgICBjb25zdCBoZWlnaHQgPSBnZXRIZWFkZXJIZWlnaHQoKVxuXG4gICAgY29uc3Qgc3BlZWQgPSA4MDAsXG4gICAgICBocmVmID0gJCh0aGlzKS5hdHRyKCdocmVmJyksXG4gICAgICB0YXJnZXQgPSAkKGhyZWYgPT09ICcjJyB8fCBocmVmID09PSAnJyA/ICdodG1sJyA6IGhyZWYpLFxuICAgICAgcG9zaXRpb24gPSB0YXJnZXQub2Zmc2V0KCkudG9wIC0gaGVpZ2h0ICsgMjBcbiAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZShcbiAgICAgIHtcbiAgICAgICAgc2Nyb2xsVG9wOiBwb3NpdGlvblxuICAgICAgfSxcbiAgICAgIHNwZWVkLFxuICAgICAgJ3N3aW5nJ1xuICAgIClcblxuICAgIGNvbnNvbGUubG9nKGhlaWdodClcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIC8qKlxuICAgKiBjb21tb25cbiAgICogcGFnZSAtIGFuY2hvbGlua1xuICAgKi9cbiAgZnVuY3Rpb24gcGFnZUxpbmtBbmNob3JQb3MoKSB7XG4gICAgaWYgKGxvY2F0aW9uLmhhc2ggIT09ICcnKSB7XG4gICAgICB2YXIgdGFyZ2V0T2Zmc2V0ID0gJChsb2NhdGlvbi5oYXNoKS5vZmZzZXQoKS50b3BcbiAgICAgICR3aW5kb3cuc2Nyb2xsVG9wKHRhcmdldE9mZnNldCAtIGdldEhlYWRlckhlaWdodCgpKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBjb21tb25cbiAgICogc3AgbmF2IC0gdG9nZ2xlXG4gICAqL1xuICBsZXQgcG9zID0gMFxuICBsZXQgc3BOYXZPcGVuID0gZmFsc2VcblxuICBmdW5jdGlvbiBzcE5hdlRvZ2dsZSgpIHtcbiAgICBpZiAoc3BOYXZPcGVuKSB7XG4gICAgICAkKCdib2R5JykucmVtb3ZlQ2xhc3Mob3BlbkNscylcbiAgICAgICQoJ2h0bWwnKVxuICAgICAgICAucmVtb3ZlQXR0cignc3R5bGUnKVxuICAgICAgICAucmVtb3ZlQ2xhc3MobnZhT3BlbkNscylcbiAgICAgICQoJ2h0bWwsIGJvZHknKS5zY3JvbGxUb3AocG9zKVxuXG4gICAgICBzcE5hdk9wZW4gPSBmYWxzZVxuICAgIH0gZWxzZSB7XG4gICAgICBwb3MgPSAkd2luZG93LnNjcm9sbFRvcCgpXG4gICAgICAkKCdodG1sJykuY3NzKHtcbiAgICAgICAgcG9zaXRpb246ICdmaXhlZCcsXG4gICAgICAgIHRvcDogLXBvc1xuICAgICAgfSlcblxuICAgICAgJCgnYm9keScpLmFkZENsYXNzKG9wZW5DbHMpXG4gICAgICAkKCdodG1sJykuYWRkQ2xhc3MobnZhT3BlbkNscylcblxuICAgICAgc3BOYXZPcGVuID0gdHJ1ZVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBjb21tb25cbiAgICogc3AgbmF2IC0gY2xpY2sgYW5kIGNsb3NlXG4gICAqL1xuICBmdW5jdGlvbiBuYXZDbGlja0Nsb3NlKCkge1xuICAgIGlmICgkKCdodG1sJykuaGFzQ2xhc3MobnZhT3BlbkNscykpIHtcbiAgICAgICQoJ2h0bWwnKVxuICAgICAgICAucmVtb3ZlQ2xhc3MobnZhT3BlbkNscylcbiAgICAgICAgLnJlbW92ZUF0dHIoJ3N0eWxlJylcbiAgICAgICQoJ2JvZHknKS5yZW1vdmVDbGFzcyhvcGVuQ2xzKVxuICAgICAgJCgnaHRtbCwgYm9keScpLnNjcm9sbFRvcChzY3JvbGwpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIGNvbW1vblxuICAgKiBzcCBuYXYgLSByZXNldCBpbiBwYyBzaXplXG4gICAqL1xuICBmdW5jdGlvbiBuYXZSZXNldCgpIHtcbiAgICBjb25zdCB3ID0gJHdpbmRvdy53aWR0aCgpXG5cbiAgICBpZiAodyA+PSBQQyAmJiAkKCdodG1sJykuaGFzQ2xhc3MobnZhT3BlbkNscykpIHtcbiAgICAgICQoJ2h0bWwnKS5yZW1vdmVBdHRyKCdzdHlsZScpXG4gICAgICAkKCdodG1sLCBib2R5Jykuc2Nyb2xsVG9wKHBvcylcblxuICAgICAgJCgnaHRtbCcpLnJlbW92ZUNsYXNzKG52YU9wZW5DbHMpXG4gICAgICAkKCdib2R5JykucmVtb3ZlQ2xhc3Mob3BlbkNscylcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogY29tbW9uXG4gICAqIGdvIHRvcCAtIHNpZGUgZml4XG4gICAqL1xuXG4gIGZ1bmN0aW9uIGdvVG9wRml4ZWRTaWRlKCkge1xuICAgIGNvbnN0IG1heFdpZHRoID0gMTYwMFxuICAgIGNvbnN0IHdpbmRvd1dpZHRoID0gJHdpbmRvdy53aWR0aCgpXG5cbiAgICBpZiAod2luZG93V2lkdGggPj0gbWF4V2lkdGgpIHtcbiAgICAgIGNvbnN0IGNvbnRlbnRXaWR0aCA9IHdpbmRvd1dpZHRoIC0gbWF4V2lkdGhcbiAgICAgIGNvbnN0IGJ0blBvc2l0aW9uU2lkZSA9IGNvbnRlbnRXaWR0aCAvIDJcbiAgICAgICR0b3BCdG4uY3NzKHtcbiAgICAgICAgcmlnaHQ6IGAke2J0blBvc2l0aW9uU2lkZX1weGBcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgICR0b3BCdG4uY3NzKHtcbiAgICAgICAgcmlnaHQ6IDE1XG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBjb21tb25cbiAgICogZ28gdG9wIC0gZml4IGxlbmd0aFxuICAgKi9cbiAgZnVuY3Rpb24gZ29Ub3BGaXhlZExlbmd0aCgpIHtcbiAgICBjb25zdCB3aW5kb3dXaWR0aCA9ICR3aW5kb3cud2lkdGgoKVxuXG4gICAgbGV0IHNjcm9sbFkgPSAkKGRvY3VtZW50KS5oZWlnaHQoKVxuICAgIGxldCBzY3JvbGxQID0gJHdpbmRvdy5oZWlnaHQoKSArICQod2luZG93KS5zY3JvbGxUb3AoKVxuICAgIGxldCBmb290ZXJIID0gJCgnLnNpdGUtZm9vdGVyJykuaW5uZXJIZWlnaHQoKVxuICAgIGlmIChzY3JvbGxZIC0gc2Nyb2xsUCA8PSBmb290ZXJIKSB7XG4gICAgICBpZiAoJHdpbmRvdy53aWR0aCgpID4gQlApIHtcbiAgICAgICAgJHRvcEJ0bi5jc3Moe1xuICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICAgIGJvdHRvbTogZm9vdGVySCAtIDMwXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkdG9wQnRuLmNzcyh7XG4gICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgICAgYm90dG9tOiBmb290ZXJIIC0gMjdcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHNjcm9sbFkgLSBzY3JvbGxQID4gZm9vdGVySCkge1xuICAgICAgJHRvcEJ0bi5jc3Moe1xuICAgICAgICBwb3NpdGlvbjogJ2ZpeGVkJyxcbiAgICAgICAgYm90dG9tOiAxNVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogaW5kZXhcbiAgICogbXYgaGVpZ2h0IDEwMCUgZml0XG4gICAqL1xuICBmdW5jdGlvbiBob21lTXZIZWlnaHRGaXQoKSB7XG4gICAgY29uc3QgaCA9ICR3aW5kb3cuaGVpZ2h0KClcbiAgICBjb25zdCBoaCA9ICRoZWFkZXIuaGVpZ2h0KClcblxuICAgIGNvbnN0IG12SCA9IGggLSBoaFxuXG4gICAgaWYgKCQoJyNtdlN3aXBlcicpLmxlbmd0aCkge1xuICAgICAgJCgnI212U3dpcGVyJykuY3NzKCdoZWlnaHQnLCBtdkgpXG4gICAgfVxuICB9XG59KVxuIl0sImZpbGUiOiJzY3JpcHRzLmpzIn0=
